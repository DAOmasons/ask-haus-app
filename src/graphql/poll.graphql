fragment FullPoll on AskHausPoll {
  ...PollCard
  pointsAddress: pointsParams_id
  choicesParams {
    basicChoices {
      choices {
        ...BasicChoice
      }
    }
  }
  round {
    id
    totalVoted
    batchVotes {
      ...BatchVote
    }
  }
}

query getPoll($pollId: String!) {
  AskHausPoll_by_pk(id: $pollId) {
    ...FullPoll
  }
}

query livePolls($now: numeric!, $dao: String!) {
  upcomingPolls: AskHausPoll(
    where: {
      votesParams: { startTime: { _gt: $now } }
      pointsParams: { dao: { _eq: $dao } }
    }
    order_by: { votesParams: { startTime: desc } }
  ) {
    ...PollCard
  }
  activePolls: AskHausPoll(
    where: {
      votesParams: { startTime: { _lt: $now }, endTime: { _gt: $now } }
      pointsParams: { dao: { _eq: $dao } }
    }
    order_by: { votesParams: { startTime: desc } }
  ) {
    ...PollCard
  }
}
